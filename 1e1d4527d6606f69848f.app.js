!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(10),r=n(7);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){var i=n(8);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(0),r=n(8),o=n(11),s=n(12);function a(e){var n="function"==typeof Map?new Map:void 0;return t.exports=a=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)},a(e)}t.exports=a},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e,n){},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(t){return n(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},i(e)}t.exports=i},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var i=n(8);function r(e,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?t.exports=r=function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}:t.exports=r=Reflect.construct,r.apply(null,arguments)}t.exports=r},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){function n(){return"serviceWorker"in navigator&&("https:"===window.location.protocol||"localhost"===window.location.hostname||0===window.location.hostname.indexOf("127."))}e.install=function(t){t||(t={}),n()&&navigator.serviceWorker.register("sw.js",{})},e.applyUpdate=function(t,e){},e.update=function(){n()&&navigator.serviceWorker.getRegistration().then(function(t){if(t)return t.update()})}},function(t,e,n){"use strict";n.r(e);n(9);var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(3),u=n.n(a),l=n(4),c=n.n(l),h=n(0),d=n.n(h),f=n(7),p=n.n(f),v=n(5),y=n.n(v),m=n(6),b=n.n(m);n(13);function k(){var t=r()(["<div></div>"]);return k=function(){return t},t}function g(){var t=r()(['\n      <div class="modal">\n        <h3>','</h3>\n        <div class="image">\n          <span class="close">‚úñÔ∏è</span>\n          <img class="preview" src="','" alt="','">\n          <img class="loader" src="./assets/images/loader.svg" alt="loader">\n        </div>\n        <div class="more">\n          <div class="info">\n            <label>Original URL: </label>\n            <a href="','" target="_blank">open image</a>\n          </div>\n          <div class="info">\n            <label>Subreddit: </label>\n            <a href="','" target="_blank">open website</a>\n          </div>\n          <div class="info">\n            <label>Author: </label>\n            <span>',"</span>\n          </div>\n        </div>\n      </div>\n    "]);return g=function(){return t},t}var w=String.raw,E=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).closeDetail=t.closeDetail.bind(p()(t)),t.imageLoad=t.imageLoad.bind(p()(t)),t}return y()(e,t),u()(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]!==n&&(this[t]=n)}},{key:"template",value:function(){return this.show?w(g(),this.title,this.preview,this.title,this.url,this.permalink,this.author):w(k())}},{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"lazyRender",value:function(){this.show?(document.body.setAttribute("fullscreen",!0),this.innerHTML=this.template(),this.querySelector(".close").addEventListener("click",this.closeDetail),this.querySelector(".preview").addEventListener("load",this.imageLoad)):(document.body.removeAttribute("fullscreen"),this.querySelector(".close").removeEventListener("click",this.closeDetail),this.querySelector(".preview").removeEventListener("load",this.imageLoad),this.loaded=!1,this.innerHTML=this.template())}},{key:"imageLoad",value:function(){this.loaded=!0}},{key:"closeDetail",value:function(){this.dispatchEvent(new CustomEvent("close-photo",{bubbles:!0}))}},{key:"show",get:function(){return this._show},set:function(t){this.show!==!!t&&(this._show=!!t,this.show?this.setAttribute("show",!0):this.removeAttribute("show"),this.lazyRender())}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"preview",get:function(){return this._preview},set:function(t){this._preview=t}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"permalink",get:function(){return this._permalink},set:function(t){this._permalink=t}},{key:"author",get:function(){return this._author},set:function(t){this._author=t}},{key:"loaded",get:function(){return this._loaded},set:function(t){this._loaded=!!t,this.loaded?this.setAttribute("loaded",!0):this.removeAttribute("loaded")}}],[{key:"observedAttributes",get:function(){return["show"]}}]),e}(b()(HTMLElement));n(14);function _(){var t=r()(['\n      <div class="alert">\n        <span>',"</span>\n      </div>\n    "]);return _=function(){return t},t}var S=String.raw,L=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).timer=null,t}return y()(e,t),u()(e,[{key:"template",value:function(){return S(_(),this.message)}},{key:"connectedCallback",value:function(){var t=this;this.innerHTML=this.template(),this.timer=setTimeout(function(){t.parentNode.removeChild(t)},3e3)}},{key:"disconnectedCallback",value:function(){clearTimeout(this.timer)}},{key:"message",get:function(){return this._message},set:function(t){this._message=t}}]),e}(b()(HTMLElement)),C=(n(15),function(t,e){return t.oH-t.iH-t.sY<=e}),x=function(t){return!(!t.thumbnail.match(/(gif|png|jpg|jpeg)$/)||!t.preview)};function A(){var t=r()(['<div class="photo-thumbs"></div>']);return A=function(){return t},t}var O=String.raw,T=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).scrollEvent=t.scrollEvent.bind(p()(t)),t}return y()(e,t),u()(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]!==n&&(this[t]=n)}},{key:"template",value:function(){return O(A())}},{key:"connectedCallback",value:function(){window.addEventListener("scroll",this.scrollEvent),this.innerHTML=this.template(),this.fetchData()}},{key:"disconnectedCallback",value:function(){window.removeEventListener("scroll",this.scrollEvent)}},{key:"fetchData",value:function(t){var e=this;if(this.dispatchLoading(!0),this.photo){var n="https://www.reddit.com/r/".concat(this.photo,"/top.json");n=this.after?"".concat(n,"?after=").concat(this.after):n,fetch(n).then(this.handleResponse).then(function(t){return t.json()}).then(function(n){return e.appendData(n.data,t)}).catch(function(){return e.handleError("An error has occurred üò±. Please try another keyword.")})}else this.handleError("Empty search üò¢. Please search something.")}},{key:"handleResponse",value:function(t){return t.ok?Promise.resolve(t):Promise.reject(t)}},{key:"dispatchLoading",value:function(t){this.loading=t,this.dispatchEvent(new CustomEvent("loading-photo",{detail:{loading:t},bubbles:!0}))}},{key:"dispatchError",value:function(t){this.dispatchEvent(new CustomEvent("error-photo",{detail:{error:t},bubbles:!0}))}},{key:"appendData",value:function(t,e){var n=this;if(t.children.length<=0)this.handleError("Empty list üôà. Please try another keyword.");else{e&&(this.innerHTML=this.template()),this.handleSuccess();var i=this.querySelector(".photo-thumbs");t.children.map(function(t){return t.data}).forEach(function(t,e){var r=document.createElement("photo-thumb");r.author=t.author,r.title=t.title,r.preview=x(t)?n.retrievePreview(t.preview):"",r.url=t.url,r.permalink="https://www.reddit.com".concat(t.permalink),r.thumbnail=x(t)?t.thumbnail:"./assets/images/thumbnail.png",r.isImage=x(t),r.delay=e,i.appendChild(r)}),this.after=t.after||""}}},{key:"retrievePreview",value:function(t){var e=t.images[0].resolutions.length-1;return t.images[0].resolutions[e].url.replace(/&amp;/g,"&")}},{key:"handleError",value:function(t){this.dispatchError(t),this.dispatchLoading(!1)}},{key:"handleSuccess",value:function(){this.dispatchError(null),this.dispatchLoading(!1)}},{key:"scrollEvent",value:function(){if(!this.loading&&this.after){var t={oH:document.body.offsetHeight,sY:window.scrollY,iH:window.innerHeight};C(t,10)&&this.fetchData()}}},{key:"loading",get:function(){return this._loading},set:function(t){this._loading=!!t}},{key:"after",get:function(){return this._after},set:function(t){this.after!==t&&(this._after=t)}},{key:"photo",get:function(){return this._photo},set:function(t){this.photo!==t&&(this._photo=t,this.children.length>0&&(this.setAttribute("photo",this.photo),window.scrollTo(0,0),this.after="",this.fetchData(!0)))}}],[{key:"observedAttributes",get:function(){return["photo"]}}]),e}(b()(HTMLElement));n(16);function j(){var t=r()(['\n      <div class="loader">\n        <div class="spinner">\n          <img src="./assets/images/loader.svg" alt="loader">\n        </div>\n      </div>\n    ']);return j=function(){return t},t}var q=String.raw,H=function(t){function e(){return s()(this,e),c()(this,d()(e).apply(this,arguments))}return y()(e,t),u()(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]!==n&&(this[t]=n)}},{key:"template",value:function(){return q(j())}},{key:"connectedCallback",value:function(){this.innerHTML=this.template()}},{key:"show",get:function(){return this._show},set:function(t){this.show!==!!t&&(this._show=!!t,this.children.length>0&&(this.show?this.setAttribute("show",!0):this.removeAttribute("show")))}}],[{key:"observedAttributes",get:function(){return["show"]}}]),e}(b()(HTMLElement));n(17);function M(){var t=r()(['\n      <div class="content">\n        <img\n          src="','"\n          alt="','"\n          style="animation-delay: ','s">\n        <div class="overlay">\n          <span>',"</span>\n        </div>\n      </div>\n    "]);return M=function(){return t},t}var B=String.raw,P=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).imageClick=t.imageClick.bind(p()(t)),t.imageLoad=t.imageLoad.bind(p()(t)),t}return y()(e,t),u()(e,[{key:"template",value:function(){return B(M(),this.thumbnail,this.title,this.delay/20,this.isImage?"show":"open")}},{key:"connectedCallback",value:function(){this.innerHTML=this.template(),this.querySelector(".content").addEventListener("click",this.imageClick),this.querySelector("img").addEventListener("load",this.imageLoad)}},{key:"disconnectedCallback",value:function(){this.querySelector(".content").removeEventListener("click",this.imageClick),this.querySelector("img").removeEventListener("load",this.imageLoad)}},{key:"imageLoad",value:function(){this.loaded=!0}},{key:"imageClick",value:function(){this.isImage?this.dispatchEvent(new CustomEvent("open-photo",{detail:{title:this.title,preview:this.preview,url:this.url,permalink:this.permalink,author:this.author},bubbles:!0})):window.open(this.url)}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"preview",get:function(){return this._preview},set:function(t){this._preview=t}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"permalink",get:function(){return this._permalink},set:function(t){this._permalink=t}},{key:"author",get:function(){return this._author},set:function(t){this._author=t}},{key:"thumbnail",get:function(){return this._thumbnail},set:function(t){this._thumbnail=t}},{key:"isImage",get:function(){return this._isImage},set:function(t){this._isImage=!!t}},{key:"delay",get:function(){return this._delay},set:function(t){this._delay=+t}},{key:"loaded",get:function(){return this._loaded},set:function(t){this._loaded=!!t,this.loaded?this.setAttribute("loaded",!0):this.removeAttribute("loaded")}}]),e}(b()(HTMLElement));n(18);function D(){var t=r()(['\n      <div class="search">\n        <input type="search" placeholder="type something" value="','">\n        <button type="button"><span>Search</span></button>\n      </div>\n    ']);return D=function(){return t},t}var R=String.raw,I=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).searchByKeyup=t.searchByKeyup.bind(p()(t)),t.searchByBlur=t.searchByBlur.bind(p()(t)),t.searchByClick=t.searchByClick.bind(p()(t)),t}return y()(e,t),u()(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]!==n&&(this[t]=n)}},{key:"template",value:function(){return R(D(),this.search)}},{key:"connectedCallback",value:function(){this.innerHTML=this.template(),this.querySelector("input").addEventListener("keyup",this.searchByKeyup),this.querySelector("input").addEventListener("blur",this.searchByBlur),this.querySelector("button").addEventListener("click",this.searchByClick)}},{key:"disconnectedCallback",value:function(){this.querySelector("input").removeEventListener("keyup",this.searchByKeyup),this.querySelector("input").removeEventListener("blur",this.searchByBlur),this.querySelector("button").removeEventListener("click",this.searchByClick)}},{key:"searchByKeyup",value:function(t){return 13===t.keyCode&&this.onSearch(t.target.value)}},{key:"searchByBlur",value:function(t){return this.onSearch(t.target.value)}},{key:"searchByClick",value:function(){return this.onSearch(this.querySelector("input").value)}},{key:"onSearch",value:function(t){this.search=t,this.dispatchEvent(new CustomEvent("search-photo",{detail:{value:t},bubbles:!0}))}},{key:"search",get:function(){return this._search},set:function(t){this.search!==t&&(this._search=t,this.setAttribute("search",this.search))}},{key:"disabled",get:function(){return this._disabled},set:function(t){if(this.disabled!==!!t){this._disabled=!!t;var e=this.querySelector("input"),n=this.querySelector("button");this.children.length>0&&(this.disabled?(e.setAttribute("disabled",!0),n.setAttribute("disabled",!0)):(e.removeAttribute("disabled"),n.removeAttribute("disabled")))}}}],[{key:"observedAttributes",get:function(){return["search","disabled"]}}]),e}(b()(HTMLElement));n(19);function K(){var t=r()(['\n      <search-bar search="','"></search-bar>\n      <div class="container">\n        <header>HEADER</header>\n        <nav>NAVIGATION</nav>\n        <main>\n          <photo-details></photo-details>\n          <photo-loader></photo-loader>\n          <photo-gallery photo="','"></photo-gallery>\n        </main>\n        <aside>ASIDE</aside>\n        <footer>RIS</footer>\n      </div>\n    ']);return K=function(){return t},t}var z=String.raw,N=function(t){function e(){var t;return s()(this,e),(t=c()(this,d()(e).call(this))).keyword="cats",t}return y()(e,t),u()(e,[{key:"attributeChangedCallback",value:function(t,e,n){this[t]!==n&&(this[t]=n)}},{key:"template",value:function(){return z(K(),this.keyword,this.keyword)}},{key:"connectedCallback",value:function(){this.addEventListener("search-photo",this.handleSearch),this.addEventListener("loading-photo",this.handleLoader),this.addEventListener("error-photo",this.handleError),this.addEventListener("open-photo",this.handleOpen),this.addEventListener("close-photo",this.handleClose),this.innerHTML=this.template()}},{key:"disconnectedCallback",value:function(){this.removeEventListener("search-photo",this.handleSearch),this.removeEventListener("loading-photo",this.handleLoader),this.removeEventListener("error-photo",this.handleError),this.removeEventListener("open-photo",this.handleOpen),this.addEventListener("close-photo",this.handleClose)}},{key:"handleSearch",value:function(t){this.keyword=t.detail.value}},{key:"handleLoader",value:function(t){this.querySelector("photo-loader").show=t.detail.loading,this.querySelector("search-bar").disabled=t.detail.loading}},{key:"handleError",value:function(t){if(t.detail.error){var e=document.createElement("photo-alert");e.message=t.detail.error,this.querySelector(".container").appendChild(e)}}},{key:"handleOpen",value:function(t){var e=this.querySelector("photo-details");e.title=t.detail.title,e.preview=t.detail.preview,e.url=t.detail.url,e.permalink=t.detail.permalink,e.author=t.detail.author,e.show=!0}},{key:"handleClose",value:function(){this.querySelector("photo-details").show=!1}},{key:"keyword",get:function(){return this._keyword},set:function(t){this.keyword!==t&&(this._keyword=t,this.children.length>0&&(this.querySelector("photo-gallery").photo=this.keyword))}},{key:"error",get:function(){return this._error},set:function(t){this.error!==!!t&&(this._error=!!t,this.error?this.setAttribute("error",!0):this.removeAttribute("error"))}}],[{key:"observedAttributes",get:function(){return["keyword","error"]}}]),e}(b()(HTMLElement));n(20).install(),customElements.define("photo-details",E),customElements.define("photo-alert",L),customElements.define("photo-gallery",T),customElements.define("photo-loader",H),customElements.define("photo-thumb",P),customElements.define("search-bar",I),customElements.define("ris-app",N)}]);